
<div class="register">
  <h1>Register</h1>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">

    <p *ngIf="registrationResult && registrationResult.success == false">
      <mat-error *ngFor="let error of registrationResult.errors">
        {{error}}
      </mat-error>
    </p>

    <!-- Firstname -->
    <mat-form-field>
      <mat-label>First Name:</mat-label>
      <input matInput formControlName="firstName" placeholder="Insert First Name" />
      <mat-error *ngFor="let error of getErrors(form.get('firstName')!,
                 'FirstName')">
        {{error}}
      </mat-error>
    </mat-form-field>

    <!-- Lastname -->
    <mat-form-field>
      <mat-label>Last Name:</mat-label>
      <input matInput formControlName="lastName" placeholder="Insert Last Name" />
      <mat-error *ngFor="let error of getErrors(form.get('firstName')!,
                 'lastName')">
        {{error}}
      </mat-error>
    </mat-form-field>

    <!-- Email -->
    <mat-form-field>
      <mat-label>Email:</mat-label>
      <input matInput formControlName="email" required placeholder="Insert Email" />
      <mat-error *ngFor="let error of getErrors(form.get('email')!,
                 'Email')">
        {{error}}
      </mat-error>
    </mat-form-field>

    <!-- UserName -->
    <mat-form-field>
      <mat-label>Username:</mat-label>
      <input matInput formControlName="userName" required placeholder="Insert User Name" />
      <mat-error *ngFor="let error of getErrors(form.get('userName')!,
                 'UserName')">
        {{error}}
      </mat-error>
    </mat-form-field>

    <!-- Password -->
    <mat-form-field>
      <mat-label>Password:</mat-label>
      <input matInput type="password" formControlName="password" required
             placeholder="Insert Password" />
      <mat-error *ngFor="let error of getErrors(form.get('password')!,
                 'Password')">
        {{error}}
      </mat-error>
    </mat-form-field>

    <!-- Confirm Password -->
    <mat-form-field>
      <mat-label>Confirm Password:</mat-label>
      <input matInput type="password" formControlName="passwordConfirmation" required
             placeholder="Confirm Password" />
      <mat-error *ngFor="let error of getErrors(form.get('passwordConfirmation')!,
                 'PasswordConfirmation')">
        "Password confirmation must match."
      </mat-error>
    </mat-form-field>

    <div>
      <button mat-flat-button color="primary" type="submit" [disabled]="form.valid == false">
        Register
      </button>
      <button mat-flat-button color="secondary"
              [routerLink]="['/']">
        Cancel
      </button>
    </div>

  </form>
</div>
